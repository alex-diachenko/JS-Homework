<html>

<head>
    <title>JAVASCRIPT HW9</title>
</head>

<body>
    <script>
        // ЗАДАНИЯ ДЛЯ РАЗМИНКИ!!!!!!)))

        //1) Есть участок кода! обернуть в try catch нужный участок кода и выбросить ошибку если getResult возвращает undefined
    
        function getResult() {
            var obj = {
            name: 'Sergei',
            lastName: 'Shakhov'
        }
            return
            obj;
        }
        try {
            const a = getResult();
            if(a == undefined) {
                throw new Error('undefined');
            }
        }  catch(e) {
                console.log('RESULT ', e );
            }

        //2) исправить код чтобы консоль логи показывали от 0 до 10, и написать почему сейчас выводит десять десяток!!
        for (var i = 0; i < 10; i++) {
            setTimeout(() => console.log(i), 0);
        } //выводит 10 десяток потому что начинает выполнятся цикл, доходит до максимального значения 10 и поэтому выводится сеттаймаут с результатом цикла десять раз

        let x = (function()  {for(var i = 0; i <= 10; i++) {
           setTimeout(console.log(i),0) ;
        }
        })()

        // 3) Есть код!! В какой последовательности выполнится!
        function getDatas() {
            return [
                {
                    name: "Vasia"
                },
                {
                    name: "Boria"
                },
                {
                    name: "Misha"
                },
            ]
        }
        const res = getDatas();
        console.log('RES', res);   
        setTimeout(() => console.log('settimeout1'), 100); 
        setTimeout(() => console.log('settimeout'), 10); 
        console.log('One'); 
        console.log('two'); 
        //обычные консоль-логи выполнятся по очереди, а в конце выполнятся сеттаймауты - потому что они попадают сразу в event queue и ждут по стэк очистится чтоб выполнятся,  сначала тот у которого задержка по времени меньше 10, а следом за ним выполнится с 100
         

        //4) Что выведет alert в setTimeOut
        setTimeout(function () {
            alert(i);
        }, 100);

        for (var i = 0; i < 1000000; i++) {
        }
            // alert выведет i = 1000000, потому что сеттаймаут отправляется в event queue, потом начинается выполнятся цикл, когда цикл закончился и и равен 1000000, из очереди сеттаймаут попадает в стек и выполняется

        // 5) Есть функция funct! Сделать из нее функцию конструктор которая создает обьект со свойствами name lastName
        
        function funct(name, lastName) {
            this.name = name;
            this.lastName = lastName;
        }
        new funct('Alexander', 'Diachenko');
        
        // 6) Создать функцию конструктор, которая принимает обьект и берет только lastName и position и создает обьект с этих свойств
        
        function factory({lastName, position}) {
            return {
                lastName,
                position
            };
        }

        new factory ({ name: 'Sergei', lastName: 'Shakhov', height: 188, position: 'Software developer' });


        // 7)  Создать функцию конструктор, которая принимает два свойства name, lastName конкатенирует их и сохраняет в замыкании в переменной fullName
        // random свойства не будет в обьекте ОБРАТИТЕ ВНИМАНИЕ потому что есть return!! Если не было бы return то был бы обьект с одним свойством

        function factory(name, lastName) {
            this.name = name;
            this.lastName = lastName;
            let fullName = name + " " + lastName;
            this.random = Math.random(); 
                return {
                    name: 'ZINA Borisova',
                    getRealName: (function() {
                        return fullName;
                }())
            }
        }
        console.log(new factory('Alexander', 'Diachenko'));

        // 8) Есть код! Почему строчка с комментарием покажет {misha: NADUSHA}! Сделать так чтобы a.getObject(); вернул {misha: 'misha'}
        // то есть должны быть независимые обьекты!!

        function newFactory(obj) {
            var object = obj;

            return {
                getObject: function() {
                    return {...object};
                }
            };
        }
        var a = newFactory({misha: 'misha'});
        var k = a.getObject();
        k.misha = 'NADUSHA'; 
        a.getObject(); // КОММЕНТАРИЙ!!! покажет NADUSHA 
    </script>
</body>

</html>
